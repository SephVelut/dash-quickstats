<link rel="import" href="../polymer/polymer.html">

<link rel="import" href="../jquery-import-seph/jquery.html">
<link rel="import" href="../flot-import/flot.html">
<link rel="import" href="../bootstrap-import/bootstrap.html">
<link rel="import" href="../bootstrap-import/bootstrap-progressbar.html">
<link rel="import" href="../bootstrap-import/bootstrap-daterangepicker.html">
<link rel="import" href="../jquery-import-seph/jquery-counterup.html">
<link rel="import" href="../jquery-import-seph/jquery-waypoint.html">
<link rel="import" href="../themify-import/themify-icons.html">
<link rel="import" href="../kapusta-sparkline-import/kapusta-jquery-sparkline.html">

<link rel="stylesheet" type="text/css" href="umega.css">

<dom-module id="dash-quickstats">
    <template>
        <div class="mb-30">
            <div class="media">
                <div class="media-body">
                    <h5 id="quickstats-label" class="media-heading">{{label}} <span><i></i> [[computedMargin]]</span></h5>
                    <div id="quickstats-counter" class="fs-36 fw-600 counter">{{stat}}</div>
                </div>
                <div class="media-right"><i class="fs-30 ti-receipt"></i></div>
            </div>
            <div id="quickstats-flotorder" style="height: 74px"></div>
        </div>
    </template>
    <script>
        Polymer({
            is: 'dash-quickstats',
            attached: function () {
                this.async(function () {
                    var dataRevenue = [[0, 755], [1, 1133], [2, 1234], [3, 1448], [4, 1198], [5, 918], [6, 583], [7, 842], [8, 540], [9, 665], [10, 1195], [11, 742], [12, 1040], [13, 682], [14, 1190]];
            properties: {
                label: {
                    type: String,
                    value: "Label"
                },

                    var dataOrder = [[0, 57], [1, 58], [2, 93], [3, 11], [4, 40], [5, 93], [6, 29], [7, 19], [8, 87], [9, 14], [10, 130], [11, 91], [12, 80], [13, 49], [14, 59]];
                margin: {
                    type: String,
                    value: "Null"
                },

                    var datasetOrder = [{
                        label: 'Orders',
                        data: dataOrder,
                        color: '#f39c12'
                        }];
                computedMargin: {
                    type: String,
                    computed: 'computeMargin(margin)'
                }
            },

                    var optionsOrder = {
                        series: {
                            lines: {
                                show: true,
                                lineWidth: 1
                            },
                            points: {
                                show: true,
                                lineWidth: 0,
                                fill: true,
                                fillColor: '#f39c12'
                            },
                            shadowSize: 0
                        },
                        grid: {
                            hoverable: true,
                            borderWidth: 0
                        },
                        xaxis: {
                            ticks: 0
                        },
                        yaxis: {
                            ticks: 0
                        },
                        tooltip: {
                            show: true,
                            content: '%s: %y',
                            defaultTheme: false
                        },
                        legend: {
                            show: false
                        }
                    };
            computeMargin: function (data) {
                var label = this.$["quickstats-label"];
                var margin = Polymer.dom(label).firstElementChild;
                var arrow = margin.firstElementChild;

                    $.plot($(this.$["quickstats-flotorder"]), datasetOrder, optionsOrder);

                    $(this.$["quickstats-counter"]).counterUp({
                        delay: 10,
                        time: 1000
                    });
                });
            }
        })
    </script>
</dom-module>